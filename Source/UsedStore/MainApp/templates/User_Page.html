{% load static %}
<!DOCTYPE html>
<html lang="en">

  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Z-Store</title>
    <!-- plugins:css -->
    <link rel="stylesheet" href="{% static 'vendors/feather/feather.css' %}">
    <link rel="stylesheet" href="{% static 'vendors/ti-icons/css/themify-icons.css' %}">
    <link rel="stylesheet" href="{% static 'vendors/css/vendor.bundle.base.css' %}">
    <!-- endinject -->
    <!-- Plugin css for this page -->
    <link rel="stylesheet" href="{% static 'vendors/datatables.net-bs4/dataTables.bootstrap4.css' %}">
    <link rel="stylesheet" href="{% static 'vendors/ti-icons/css/themify-icons.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'js/select.dataTables.min.css' %}">
    <link rel="stylesheet" href="{% static 'vendors/mdi/css/materialdesignicons.min.css' %}">
    <link rel="stylesheet" href="{% static 'vendors/mdi/css/materialdesignicons.min.css' %}">
    <!-- End plugin css for this page -->
    <!-- inject:css -->
    <link rel="stylesheet" href="{% static 'css/vertical-layout-light/style.css' %}">
    <!-- endinject -->
    <link rel="shortcut icon" href="{% static 'images/Custom Logo/i2.png' %}" />
    <!-- Custom Styling -->
    <link rel="stylesheet" href="https://cdn.materialdesignicons.com/5.5.55/css/materialdesignicons.min.css">

    <style>
      .cardImage {
        height: 100%;
        width: 100%;
        object-fit: cover;
      }

      .cardDetail {
        display: inline-block;
        margin-left: 5px;
      }
    </style>
    <!-- End of Custom Styling -->
  </head>

  <body>
    <div class="container-scroller">
      <!-- partial:partials/_navbar.html -->
      <nav class="navbar col-lg-12 col-12 p-0 fixed-top d-flex flex-row">
          <div class="text-center navbar-brand-wrapper d-flex align-items-center justify-content-center">
            <a class="navbar-brand brand-logo mr-5" href="{% url 'index' %}"><img
                src="{% static 'images/Custom Logo/p2.png' %}" class="mr-2" alt="logo" /></a>
            <a class="navbar-brand brand-logo-mini" href="{% url 'index' %}"><img
                src="{% static 'images/logo-mini.svg' %}" alt="logo" /></a>
          </div>
          <div class="navbar-menu-wrapper d-flex align-items-center justify-content-end">
            <!-- <button class="navbar-toggler navbar-toggler align-self-center" type="button" data-toggle="minimize">
            <span class="icon-menu"></span>
          </button> -->
            <ul class="navbar-nav mr-lg-2">
              <li class="nav-item nav-search d-none d-lg-block">
                <div class="input-group">
                  <div class="input-group-prepend hover-cursor" id="navbar-search-icon">
                    <span class="input-group-text" id="search">
                      <i class="icon-search"></i>
                    </span>
                  </div>
                  <input type="text" class="form-control" id="navbar-search-input" placeholder="Search now"
                    aria-label="search" aria-describedby="search">
                </div>
              </li>
            </ul>
            <ul class="navbar-nav navbar-nav-right">
              {% if not user.username %}
              <li class="nav-item nav-profile dropdown">
                <a href="{% url 'signup' %}" class="btn btn-primary">SIGN UP</a>
                <a href="{% url 'signin' %}" class="btn btn-primary" style="margin-left: 10px;">SIGN IN</a>
              </li>
              {% else %}
              <li class="nav-item nav-profile dropdown">
                <a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown" id="profileDropdown">
                  <a href="" class="btn btn-inverse-success p-2">My Order's</a>
                </a>
              </li>
              <li class="nav-item nav-profile dropdown">
                <a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown" id="profileDropdown">
                  <a href="{% url 'addProducts' %}" class="btn btn-inverse-success p-2">Sell Product</a>
                </a>
              </li>
              <li class="nav-item nav-profile dropdown">
                <a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown" id="profileDropdown">
                  <a href="{% url 'manageProductsPage' %}" class="btn btn-inverse-success p-2">Manage My Product</a>
                </a>
              </li>
              {% if user.userRole == 1 %}
              <li class="nav-item nav-profile dropdown">
                <a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown" id="profileDropdown">
                  <a href="{% url 'adminPy' %}" class="btn btn-inverse-dark p-2">Admin Dashboard</a>
                </a>
              </li>
              {% endif %}
              <li class="nav-item nav-profile dropdown">
                <a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown" id="profileDropdown">
                  <a href="{% url 'cart' %}" class="btn btn-sm btn-inverse-warning p-1"><i class="mdi mdi-cart-plus"></i><span class="badge badge-sm badge-light p-1">{% if usercart %}{{ usercart.cartcount }}{% else %}0{% endif %}</span></a>
                </a> 
              </li>

              <li class="nav-item nav-profile dropdown">
                <a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown" id="profileDropdown">
                  <h4 style="display: inline-block; font-weight: 900; justify-content: center;" class="mr-2">
                    {{userdata.fullname}}
                  </h4>
                  {% if userdata.profileImage %}
                  <img src="{{userdata.profileImage.url}}" alt="profile" />
                  {% else %}
                  <img src="{% static 'images/faces/avatar.jpeg' %}" alt="profile" />
                  {% endif %}
                </a>
                <div class="dropdown-menu dropdown-menu-right navbar-dropdown" aria-labelledby="profileDropdown">
                  <a class="dropdown-item" href="{% url 'settings' %}">
                    <i class="ti-settings text-primary"></i>
                    Settings
                  </a>
                  <a class="dropdown-item" href="{% url 'userLogout' %}">
                    <i class="ti-power-off text-primary"></i>
                    Logout
                  </a>
                </div>
              </li>
              {% endif %}
            </ul>
            <button class="navbar-toggler navbar-toggler-right d-lg-none align-self-center" type="button"
              data-toggle="offcanvas">
              <span class="icon-menu"></span>
            </button>
          </div>
      </nav>
      <!-- partial -->
      
      <div class="container-fluid page-body-wrapper">
        <!-- partial:partials/_settings-panel.html -->
        <div id="right-sidebar" class="settings-panel">
          <i class="settings-close ti-close"></i>
          <ul class="nav nav-tabs border-top" id="setting-panel" role="tablist">
            <li class="nav-item">
              <a class="nav-link active" id="todo-tab" data-toggle="tab" href="#todo-section" role="tab"
                aria-controls="todo-section" aria-expanded="true">TO DO LIST</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="chats-tab" data-toggle="tab" href="#chats-section" role="tab"
                aria-controls="chats-section">CHATS</a>
            </li>
          </ul>

        </div>
        <!-- partial -->
        <!-- partial:partials/_sidebar.html -->
        <nav class="sidebar sidebar-offcanvas" id="sidebar">
          <form action="{% url 'index' %}" method="post" id="filterForm">
            {% csrf_token %}
            <ul class="nav">
              <li class="nav-item mt-3">
                <h4 class="menu-title">Main Category</h4>
                <select name="main_category" class="form-control" id="mainCategory" onchange="loadFilterCategory()">
                  <option value="">All</option>
                </select>
              </li>
              <li class="nav-item mt-3 d-none" id="catList">
                <h4 class="menu-title">Category</h4>
                <select name="category" class="form-control" id="category">
                  <option value="">All</option>
                </select>
              </li>
              <li class="nav-item mt-3">
                <h4 class="menu-title">Price Range</h4>
                <select name="price_min" id="" class="form-control">
                  <option value="">Any</option>
                  <option value="1">Below 1000 &#8377;</option>
                  <option value="2">1000 &#8377; - 5000 &#8377;</option>
                  <option value="3">5000 &#8377; - 15,000 &#8377;</option>
                  <option value="4">15,000 &#8377; - 1,00,000 &#8377;</option>
                  <option value="5">Above 1,00,000 &#8377;</option>
                </select>
              </li>
              <li class="nav-item mt-3">
                <input type="submit" value="Filter" class="btn btn-sm btn-primary form-control">
              </li>
            </ul>
          </form>
        </nav>
        <!-- Side Bar Here -->
        <!-- partial -->
        <div class="main-panel" style="width: 100vw;">
          <div class="content-wrapper">
            <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4" id="products-container">
              {% if products %}
              {% for p in products %}
              {% if p.availability > 0 %}
              <div class="col mb-3">
                <div class="card" style="width: 18rem; margin-right: 8px;">
                  <div class="" style="height: 200px;">
                    <img src="{{ p.productimages_set.first.images.url }}" class="card-img-top img-fluid cardImage"
                      alt="...">
                  </div>
                  <div class="card-body">
                    <h5 class="card-title">{{p.name}}</h5>
                    <h6 class="cardDetail">Model: </h6>
                    <p class="font-weight-bold cardDetail"> {{p.yearOfMan}}</p><br>
                    <h6 class="cardDetail">QA Rating: {{p.tester_rating}}</h6><br>
                    <h6 class="cardDetail">Price: </h6>
                    <p class="font-weight-bold cardDetail">&#8377; {{p.price}}</p><br>
                    <div class="" style="display: flex; justify-content: space-around;">
                      <a href="{% url 'checkOut' p.id %}" class="btn btn-inverse-danger">Buy</a>
                      <a href="{% url 'cart' %}?id={{p.id}}" class="btn btn-inverse-warning"><i class="mdi mdi-cart-plus"></i></a>
                      <a href="{% url 'product_details' p.id %}" class="btn btn-inverse-info">More</a>
                    </div>
                  </div>
                </div>
              </div>
              {% endif %}
              {% endfor %}
              {% else %}
              <h1 style="display: inline-block;">No Products Available For Now</h1>
              {% endif %}
            </div>
            <!-- {% if category %}
            {% for p in category %}
            {% if not p.parentCategory and p.productCount > 0 %}
            <div class="row mt-1">
              <div class="col-lg-12 stretch-card">
                <div class="card">
                  <div class="card-body">
                    <h4 class="card-title">{{p.categoryName}}</h4>
                    {% for d in category %}
                    {% if d.parentCategory == p.id and d.productCount > 0 %}
                    <div class="card">
                      <div class="card-body">
                        <h4 class="card-title">{{d.categoryName}}</h4>
                        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4">
                          {% if products %}
                          {% for p in products %}
                          {% if p.categoryid == d.id %}
                          <div class="col mb-3">
                            <div class="card" style="width: 18rem; margin-right: 8px;">
                              <div class="" style="height: 200px;">
                                <img src="{{ p.imageFile.url }}" class="card-img-top img-fluid cardImage" alt="...">
                              </div>
                              <div class="card-body">
                                <h5 class="card-title">{{p.productname}}</h5>
                                <h6 class="cardDetail">Model: </h6>
                                <p class="font-weight-bold cardDetail"> 2019</p><br>
                                <h6 class="cardDetail">QA Rating: {{p.pRate}}</h6><br>
                                <h6 class="cardDetail">Price: </h6>
                                <p class="font-weight-bold cardDetail">&#8377; {{p.price}}</p><br>
                                <div class="" style="display: flex; justify-content: space-around;">
                                  <a href="#" class="btn btn-inverse-danger">Buy</a>
                                  <a href="#" class="btn btn-outline-warning">+<i class="mdi mdi-star"></i></a>
                                  <a href="#" class="btn btn-outline-info">More</a>
                                </div>
                              </div>
                            </div>
                          </div>
                          {% endif %}
                          {% endfor %}
                          {% endif %}
                        </div>
                      </div>
                    </div>
                    {% endif %}
                    {% endfor %}
                  </div>
                </div>
              </div>
            </div>
            {% endif %}
            {% endfor %}
            {% else %}
            <h1>Hello</h1>
            {% endif %} -->
            <!-- First Row Ends -->
          </div>
          <!-- content-wrapper ends -->
          <!-- partial:partials/_footer.html -->
          <!-- partial -->
        </div>
        <!-- main-panel ends -->
      </div>
      <!-- page-body-wrapper ends -->
    </div>
    <!-- container-scroller -->

    <!-- plugins:js -->
    <script src="{% static 'vendors/js/vendor.bundle.base.js' %}"></script>
    <!-- endinject -->
    <!-- Plugin js for this page -->
    <script src="{% static 'vendors/chart.js/Chart.min.js' %}"></script>
    <script src="{% static 'vendors/datatables.net/jquery.dataTables.js' %}"></script>
    <script src="{% static 'vendors/datatables.net-bs4/dataTables.bootstrap4.js' %}"></script>
    <script src="{% static 'js/dataTables.select.min.js' %}"></script>

    <!-- End plugin js for this page -->
    <!-- inject:js -->
    <script src="{% static 'js/off-canvas.js' %}"></script>
    <script src="{% static 'js/hoverable-collapse.js' %}"></script>
    <script src="{% static 'js/template.js' %}"></script>
    <script src="{% static 'js/settings.js' %}"></script>
    <script src="{% static 'js/todolist.js' %}"></script>
    <!-- endinject -->
    <!-- Custom js for this page-->
    <script src="{% static 'js/dashboard.js' %}"></script>
    <script src="{% static 'js/Chart.roundedBarCharts.js' %}"></script>
    <script src="{% static 'productsJS/filtering.js' %}"></script>
    <!-- End custom js for this page-->
    <script>
      const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]')
      const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))
    </script>
  </body>

</html>